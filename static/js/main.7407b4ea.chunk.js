(this["webpackJsonpgit-repo-viewer"]=this["webpackJsonpgit-repo-viewer"]||[]).push([[0],{36:function(e,n,t){e.exports=t(48)},41:function(e,n,t){},42:function(e,n,t){},48:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(26),l=t.n(o),c=(t(41),t(8)),i=t(11),u=t(9),s=t(14),m=t(12),d=(t(42),t(13)),p=t(4);function g(){var e=Object(d.a)(["\n  background: transparent;\n  color: palevioletred;\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border: 2px solid palevioletred;\n  border-radius: 3px;\n  &:hover {\n    background-color: palevioletred;\n    color: white;\n    cursor: pointer;\n    text-decoration: none;\n  }\n"]);return g=function(){return e},e}var f=Object(p.a)("div")({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"#F3F0ED"}),b=Object(p.a)("header")({width:"100%",height:60,backgroundColor:"rgb(210, 54, 105)",display:"flex",justifyContent:"flex-end",alignItems:"center",boxShadow:" 2px 1px 10px 3px rgb(231, 231, 231)"}),h=Object(p.a)("div")({width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"white"}),v=Object(p.a)("img")((function(e){var n=e.height,t=e.width,a=e.src,r=e.margin;return{borderRadius:"50%",width:t||48,height:n||48,backgroundColor:"#ccc",overflow:"hidden",marginLeft:r||20,marginRight:r||20,src:a}})),E=Object(p.a)("span")((function(e){var n=e.loadingText;return{color:n?"rgb(154,154,154)":"rgb(163,168,174)",fontSize:n?20:13,paddingLeft:3,fontWeight:200,fontFamily:"Rubik"}})),x=Object(p.a)("div")({display:"flex",justifyContent:"center",alignItems:"center"}),y=Object(p.a)("h4")({color:"dark-grey",cursor:"pointer"}),j=p.a.button(g()),w=Object(p.a)("input")({minWidth:"50px",height:"15px",borderRadius:4,fontSize:13,border:"2px solid #ccc",fontWeight:200,fontFamily:"Rubik",padding:"8px 20px",textDecoration:"none",background:"transparent"}),O=Object(p.a)("span")({color:"red"}),C=Object(p.a)("div")({width:"600px",height:80,display:"flex",justifyContent:"flex-end",alignItems:"center"}),k=Object(p.a)("div")({width:"100%",display:"flex",flex:1,flexDirection:"column"}),S=Object(p.a)("ol")({borderBottom:"1px solid #ccc",paddingLeft:30}),N=Object(p.a)("div")((function(e){return{display:"flex",width:"100%",justifyContent:e.justifyContent||"space-between",flexDirection:"row",paddingTop:10,fontWeight:500}})),L=Object(p.a)("div")({display:"flex",boxShadow:" 2px 1px 10px 0.5px rgb(231, 231, 231)",borderRadius:5,padding:10,fontSize:13,fontFamily:"Rubik",marginTop:10,flexDirection:"column",background:"white"}),R=Object(p.a)("p")({fontSize:13,paddingLeft:40}),A=Object(p.a)("div")({width:"90%",minHeight:"70px",margin:"30px 5px 30px 30px",border:"3px solid palevioletred",padding:"3px 15px 10px",borderRadius:4}),U=Object(p.a)("span")({display:"inline-block",margin:"4px 4px 4px 0",backgroundColor:"#eee",borderRadius:3,padding:"2px 6px 3px",color:"#666",fontSize:13}),$=Object(p.a)("i")((function(e){return{display:"flex",paddingTop:e.noPadding?0:15,paddingRight:4,justifyContent:"center",color:"rgb(163,168,174)",cursor:"pointer"}})),P=t(23),T=t(16),q=t(50);function D(){var e=Object(d.a)(["\n  query ($name: String!, $repo: String!) {\n    repository(owner: $name, name: $repo) {\n      issues(last: 30, states: CLOSED) {\n        edges {\n          node {\n            title\n            id\n            url\n            number\n            createdAt\n            closedAt\n            author {\n              login\n            }\n            comments(first: 20) {\n              totalCount\n              edges {\n                node {\n                  id\n                  author {\n                    login\n                    avatarUrl\n                  }\n                  body\n                  createdAt\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return D=function(){return e},e}function I(){var e=Object(d.a)(["\n  query ($name: String!, $repo: String!) {\n    repository(owner: $name, name: $repo) {\n      issues(last: 30, states: OPEN) {\n        edges {\n          node {\n            title\n            id\n            url\n            number\n            createdAt\n            closedAt\n            author {\n              login\n            }\n            comments(first: 20) {\n              totalCount\n              edges {\n                node {\n                  id\n                  author {\n                    login\n                    avatarUrl\n                  }\n                  body\n                  createdAt\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return I=function(){return e},e}function F(){var e=Object(d.a)(["\n  query ($name: String!, $repo: String!) {\n    repository(owner: $name, name: $repo) {\n      pullRequests(last: 30) {\n        edges {\n          node {\n            id\n            title\n            number\n            url\n            comments(first: 20) {\n              totalCount\n              edges {\n                node {\n                  id\n                  author {\n                    login\n                    avatarUrl\n                  }\n                  body\n                  createdAt\n                }\n              }\n            }\n            author {\n              login\n            }\n            createdAt\n            closedAt\n            merged\n          }\n        }\n      }\n    }\n  }\n"]);return F=function(){return e},e}function z(){var e=Object(d.a)(["\n\tquery {\n\t\tviewer {\n\t\t\tavatarUrl\n\t\t\tlogin\n\t\t\tid\n\t\t}\n\t}\n"]);return z=function(){return e},e}var W=Object(T.a)(z()),B=Object(T.a)(F()),H=Object(T.a)(I()),G=Object(T.a)(D()),J=function(e){var n=e.onLogout,t=function(){var e=Object(q.a)(W),n=e.loading,t=e.error,a=e.data,r=a&&a.viewer||{};return{res:Object(P.a)({},r,{loading:n,error:t})}}().res;return r.a.createElement(b,null,r.a.createElement(y,{onClick:n},"Logout"),(t.loading||t.error)&&r.a.createElement(v,{src:"https://www.iconninja.com/files/980/515/831/warrior-ninja-avatar-samurai-icon.svg"}),t&&t.avatarUrl&&r.a.createElement(v,{src:t.avatarUrl,alt:t.login}))},M=function(e){var n=e.onSubmitSearch,t=Object(a.useState)(""),o=Object(c.a)(t,2),l=o[0],i=o[1],u=Object(a.useState)(""),s=Object(c.a)(u,2),m=s[0],d=s[1];return r.a.createElement(C,null,r.a.createElement(w,{onChange:function(e){i(e.target.value)},type:"text",placeholder:"name..."}),r.a.createElement("h2",{style:{marginLeft:10,marginRight:10}},"/"),r.a.createElement(w,{onChange:function(e){d(e.target.value)},type:"text",placeholder:"repo..."}),r.a.createElement(j,{onClick:function(){n({name:l,repoName:m})}},"SEARCH"))},V=function(e){var n=e.activeTab,t=e.label,a=e.onClick,o="tab-list-item";return n===t&&(o+=" tab-list-active"),r.a.createElement("li",{className:o,onClick:function(){return a(t)}},t)},K=function(e){var n=e.children,t=Object(a.useState)(n[0].props.label),o=Object(c.a)(t,2),l=o[0],i=o[1],u=function(e){i(e)};return r.a.createElement(k,null,r.a.createElement(S,null,n.map((function(e){var n=e.props.label;return r.a.createElement(V,{activeTab:l,key:n,label:n,onClick:u})}))),r.a.createElement("div",{className:"tab-content"},n.map((function(e){if(e.props.label===l)return e.props.children}))))},Q=t(15),X=t.n(Q),Y=function(e){var n=e.comment;return r.a.createElement(L,null,r.a.createElement(N,{justifyContent:"flex-start"},r.a.createElement(v,{margin:10,width:20,height:20,src:n.node.author.avatarUrl}),r.a.createElement("span",null,n.node.author.login),r.a.createElement(E,null,"commented on ",X()(n.node.createdAt).format("LLL"))),r.a.createElement(R,null,n.node.body))},Z=function(e){var n=e.data,t=e.isPressed,o=e.cardPressed,l=Object(a.useState)(n.comments.edges),i=Object(c.a)(l,2),u=i[0],s=i[1];return r.a.createElement(A,null,r.a.createElement(N,null,r.a.createElement("h3",{style:{display:"flex",flexDirection:"row"}},r.a.createElement($,{noPadding:!0,className:"fas fa-code-branch"}),n.title),r.a.createElement($,{onClick:function(){return o(t?"":n.id)},className:"fas fa-comment"},r.a.createElement(E,null,n.comments.totalCount))),r.a.createElement(U,null,"#",n.number),r.a.createElement(U,null,"by ",n.author.login),r.a.createElement(U,null,"created on ".concat(X()(n.createdAt).format("LLL"))),n.closedAt&&r.a.createElement(U,null,"closed on ".concat(X()(n.closedAt).format("LLL"))),r.a.createElement(U,null,r.a.createElement($,{noPadding:!0,onClick:function(){n.url&&window.open(n.url)},className:"fab fa-github"})),!t&&r.a.createElement($,{onClick:function(){return o(n.id)},className:"fas fa-chevron-down"}),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement($,{onClick:function(){return o("")},className:"fas fa-chevron-up"}),r.a.createElement(N,null,r.a.createElement("h4",null,"Comments"),n.comments.totalCount>0&&r.a.createElement(w,{onChange:function(e){!function(e){var t=n.comments.edges.filter((function(n){return n.node.body.toUpperCase().includes(e.toUpperCase())||n.node.author.login.toUpperCase().includes(e.toUpperCase())||X()(n.node.createdAt).format("LLL").toUpperCase().includes(e.toUpperCase())}));s(t)}(e.target.value)},type:"text",placeholder:"search..."})),0===n.comments.totalCount?r.a.createElement("em",null,"no comments"):r.a.createElement(r.a.Fragment,null,u.map((function(e){return r.a.createElement(Y,{key:e.node.id,comment:e})})),n.comments.totalCount>4&&r.a.createElement($,{onClick:function(){return o("")},className:"fas fa-chevron-up"}))))},_=function(e){var n=e.name,t=e.repoName,o=e.type,l=Object(a.useState)(""),i=Object(c.a)(l,2),u=i[0],s=i[1],m="pullRequests"===o?o:"issues",d=function(e,n,t){var a=Object(q.a)(function(){var e="";switch(t){case"pullRequests":e=B;break;case"open-issues":e=H;break;case"closed-issues":e=G}return e}(),{variables:{name:e,repo:n}}),r=a.loading,o=a.error,l=a.data,c=a.refetch,i=l&&l.repository||{};return{repo:Object(P.a)({},i,{loading:r,error:o,refetch:c})}}(n,t,o).repo;return d&&d.loading?r.a.createElement(x,{style:{height:"50vh"}},r.a.createElement(E,{loadingText:!0},"loading...")):d.error?r.a.createElement(x,{style:{height:"50vh"}},r.a.createElement(O,null,d.error.message.includes("401")?"There seems to be some errors. Please ensure you have right access token":"Name or repository not found")):d&&d[m]?d[m].edges.map((function(e){return r.a.createElement(Z,{cardPressed:function(e){return s(e)},isPressed:u===e.node.id,key:e.node.id,data:e.node})})):r.a.createElement(x,{style:{height:"50vh"}},r.a.createElement("em",null,"No ",o," found"))},ee=function(){var e=Object(a.useState)({name:"",repoName:""}),n=Object(c.a)(e,2),t=n[0],o=n[1];return r.a.createElement(h,null,r.a.createElement(M,{onSubmitSearch:function(e){o(e)}}),t&&t.name&&t.repoName?r.a.createElement(K,null,r.a.createElement("div",{label:"Pull requests"},r.a.createElement(_,{name:t.name,repoName:t.repoName,type:"pullRequests"})),r.a.createElement("div",{label:"Open issues"},r.a.createElement(_,{name:t.name,repoName:t.repoName,type:"open-issues"})),r.a.createElement("div",{label:"Closed issues"},r.a.createElement(_,{name:t.name,repoName:t.repoName,type:"closed-issues"}))):r.a.createElement(x,{style:{height:"50vh"}},r.a.createElement(E,{loadingText:!0},"Some example repositories:",r.a.createElement("br",null),r.a.createElement("br",null),["relic-toolkit/relic","ethereum/go-ethereum","ahmadawais/corona-cli","nomiclabs / buidler"].map((function(e,n){return r.a.createElement("li",{key:n},e)})))))},ne=function(e){var n=e.onSubmit,t=Object(a.useState)(""),o=Object(c.a)(t,2),l=o[0],i=o[1];return r.a.createElement(f,null,r.a.createElement("form",{onSubmit:function(e){return n(e,l)}},r.a.createElement("h1",null,"Git Repo Viewer"),r.a.createElement(w,{type:"password",name:"token",value:l,onChange:function(e){i(e.target.value)},placeholder:"Paste your GitHub token"}),r.a.createElement(j,{css:{width:"100%",fontFamily:"monospace"}},"SUBMIT")))};ne.defaultProps={errorMsg:""};var te=ne,ae=localStorage.getItem("token"),re=new s.a({uri:"https://api.github.com/graphql",headers:{Authorization:"Bearer ".concat(ae)}}),oe=new i.a({link:re,cache:new m.a});var le=function(){var e=Object(a.useState)(""),n=Object(c.a)(e,2),t=n[0],o=n[1],l=Object(a.useState)(""),i=Object(c.a)(l,2),s=i[0],m=i[1];return r.a.createElement("div",{className:"layout"},ae?r.a.createElement(u.a,{client:oe},r.a.createElement(J,{onChangeName:function(e){return o(e)},onChangeRepo:function(e){return m(e)},onLogout:function(){console.log("accesToken => ",ae),localStorage.clear(),window.location.reload()}}),r.a.createElement(ee,{name:t,repo:s})):r.a.createElement(te,{onSubmit:function(e,n){e.preventDefault(),localStorage.setItem("token",n),window.location.reload()}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.7407b4ea.chunk.js.map