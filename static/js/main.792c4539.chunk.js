(this["webpackJsonpgit-repo-viewer"]=this["webpackJsonpgit-repo-viewer"]||[]).push([[0],{36:function(e,t,n){e.exports=n(48)},41:function(e,t,n){},42:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(26),l=n.n(o),i=(n(41),n(8)),c=n(11),u=n(9),s=n(14),m=n(12),d=(n(42),n(13)),p=n(4);function g(){var e=Object(d.a)(["\n  background: transparent;\n  color: palevioletred;\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border: 2px solid palevioletred;\n  border-radius: 3px;\n  &:hover {\n    background-color: palevioletred;\n    color: white;\n    cursor: pointer;\n    text-decoration: none;\n  }\n"]);return g=function(){return e},e}var f=Object(p.a)("div")({width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"#F3F0ED"}),b=(Object(p.a)("div")({height:"300px"}),Object(p.a)("header")({width:"100%",height:60,backgroundColor:"rgb(210, 54, 105)",display:"flex",justifyContent:"flex-end",alignItems:"center",boxShadow:" 2px 1px 10px 3px rgb(231, 231, 231)"})),h=Object(p.a)("div")({width:"100%",height:"90%",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",background:"white",paddingBottom:20}),E=Object(p.a)("img")((function(e){var t=e.height,n=e.width,a=e.src,r=e.margin;return{borderRadius:"50%",width:n||48,height:t||48,backgroundColor:"#ccc",overflow:"hidden",marginLeft:r||20,marginRight:r||20,src:a}})),v=Object(p.a)("span")((function(e){var t=e.loadingText;return{color:t?"rgb(154,154,154)":"rgb(163,168,174)",fontSize:t?20:13,paddingLeft:3,fontWeight:200,fontFamily:"Rubik",cursor:"pointer"}})),y=Object(p.a)(v)({position:"absolute",bottom:1,paddingBottom:20}),x=Object(p.a)("div")({display:"flex",justifyContent:"center",alignItems:"center"}),j=Object(p.a)("h4")({color:"dark-grey",cursor:"pointer"}),w=p.a.button(g()),O=Object(p.a)("input")({minWidth:"50px",height:"15px",borderRadius:4,fontSize:13,border:"2px solid #ccc",fontWeight:200,fontFamily:"Rubik",padding:"8px 20px",textDecoration:"none",background:"transparent"}),k=Object(p.a)("span")({color:"red"}),C=Object(p.a)("div")({width:"600px",height:80,display:"flex",justifyContent:"flex-end",alignItems:"center"}),S=Object(p.a)("div")({width:"100%",display:"flex",flex:1,flexDirection:"column"}),N=Object(p.a)("ol")({borderBottom:"1px solid #ccc",paddingLeft:30}),L=Object(p.a)("div")((function(e){return{display:"flex",width:"100%",justifyContent:e.justifyContent||"space-between",flexDirection:"row",paddingTop:10,fontWeight:500}})),R=Object(p.a)("div")({display:"flex",boxShadow:" 2px 1px 10px 0.5px rgb(231, 231, 231)",borderRadius:5,padding:10,fontSize:13,fontFamily:"Rubik",marginTop:10,flexDirection:"column",background:"white"}),A=Object(p.a)("p")({fontSize:13,paddingLeft:40}),P=Object(p.a)("div")({width:"90%",minHeight:"70px",margin:"30px 5px 30px 30px",border:"3px solid palevioletred",padding:"3px 15px 10px",borderRadius:4}),U=Object(p.a)("span")({display:"inline-block",margin:"4px 4px 4px 0",backgroundColor:"#eee",borderRadius:3,padding:"2px 6px 3px",color:"#666",fontSize:13}),$=Object(p.a)("i")((function(e){return{display:"flex",paddingTop:e.noPadding?0:15,paddingRight:4,justifyContent:"center",color:"rgb(163,168,174)",cursor:"pointer"}})),D=n(23),T=n(16),q=n(50);function F(){var e=Object(d.a)(["\n  query ($name: String!, $repo: String!) {\n    repository(owner: $name, name: $repo) {\n      issues(last: 30, states: CLOSED) {\n        edges {\n          node {\n            title\n            id\n            url\n            number\n            createdAt\n            closedAt\n            author {\n              login\n            }\n            comments(first: 20) {\n              totalCount\n              edges {\n                node {\n                  id\n                  author {\n                    login\n                    avatarUrl\n                  }\n                  body\n                  createdAt\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return F=function(){return e},e}function I(){var e=Object(d.a)(["\n  query ($name: String!, $repo: String!) {\n    repository(owner: $name, name: $repo) {\n      issues(last: 30, states: OPEN) {\n        edges {\n          node {\n            title\n            id\n            url\n            number\n            createdAt\n            closedAt\n            author {\n              login\n            }\n            comments(first: 20) {\n              totalCount\n              edges {\n                node {\n                  id\n                  author {\n                    login\n                    avatarUrl\n                  }\n                  body\n                  createdAt\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return I=function(){return e},e}function z(){var e=Object(d.a)(["\n  query ($name: String!, $repo: String!) {\n    repository(owner: $name, name: $repo) {\n      pullRequests(last: 30) {\n        edges {\n          node {\n            id\n            title\n            number\n            url\n            comments(first: 20) {\n              totalCount\n              edges {\n                node {\n                  id\n                  author {\n                    login\n                    avatarUrl\n                  }\n                  body\n                  createdAt\n                }\n              }\n            }\n            author {\n              login\n            }\n            createdAt\n            closedAt\n            merged\n          }\n        }\n      }\n    }\n  }\n"]);return z=function(){return e},e}function B(){var e=Object(d.a)(["\n\tquery {\n\t\tviewer {\n\t\t\tavatarUrl\n\t\t\tlogin\n\t\t\tid\n\t\t}\n\t}\n"]);return B=function(){return e},e}var W=Object(T.a)(B()),G=Object(T.a)(z()),H=Object(T.a)(I()),J=Object(T.a)(F()),M=function(e){var t=e.onLogout,n=function(){var e=Object(q.a)(W),t=e.loading,n=e.error,a=e.data,r=a&&a.viewer||{};return{res:Object(D.a)({},r,{loading:t,error:n})}}().res;return r.a.createElement(b,null,r.a.createElement(j,{onClick:t},"Logout"),(n.loading||n.error)&&r.a.createElement(E,{src:"https://www.iconninja.com/files/980/515/831/warrior-ninja-avatar-samurai-icon.svg"}),n&&n.avatarUrl&&r.a.createElement(E,{src:n.avatarUrl,alt:n.login}))},V=function(e){var t=e.onSubmitSearch,n=Object(a.useState)(""),o=Object(i.a)(n,2),l=o[0],c=o[1],u=Object(a.useState)(""),s=Object(i.a)(u,2),m=s[0],d=s[1];return r.a.createElement(C,null,r.a.createElement(O,{onChange:function(e){c(e.target.value)},type:"text",placeholder:"name..."}),r.a.createElement("h2",{style:{marginLeft:10,marginRight:10}},"/"),r.a.createElement(O,{onChange:function(e){d(e.target.value)},type:"text",placeholder:"repo..."}),r.a.createElement(w,{onClick:function(){t({name:l,repoName:m})}},"SEARCH"))},K=function(e){var t=e.activeTab,n=e.label,a=e.onClick,o="tab-list-item";return t===n&&(o+=" tab-list-active"),r.a.createElement("li",{className:o,onClick:function(){return a(n)}},n)},Q=function(e){var t=e.children,n=Object(a.useState)(t[0].props.label),o=Object(i.a)(n,2),l=o[0],c=o[1],u=function(e){c(e)};return r.a.createElement(S,null,r.a.createElement(N,null,t.map((function(e){var t=e.props.label;return r.a.createElement(K,{activeTab:l,key:t,label:t,onClick:u})}))),r.a.createElement("div",{className:"tab-content"},t.map((function(e){if(e.props.label===l)return e.props.children}))))},X=n(15),Y=n.n(X),Z=function(e){var t=e.comment;return r.a.createElement(R,null,r.a.createElement(L,{justifyContent:"flex-start"},r.a.createElement(E,{margin:10,width:20,height:20,src:t.node.author.avatarUrl}),r.a.createElement("span",null,t.node.author.login),r.a.createElement(v,null,"commented on ",Y()(t.node.createdAt).format("LLL"))),r.a.createElement(A,null,t.node.body))},_=function(e){var t=e.data,n=e.isPressed,o=e.cardPressed,l=Object(a.useState)(t.comments.edges),c=Object(i.a)(l,2),u=c[0],s=c[1];return r.a.createElement(P,null,r.a.createElement(L,null,r.a.createElement("h3",{style:{display:"flex",flexDirection:"row"}},r.a.createElement($,{noPadding:!0,className:"fas fa-code-branch"}),t.title),r.a.createElement($,{onClick:function(){return o(n?"":t.id)},className:"fas fa-comment"},r.a.createElement(v,null,t.comments.totalCount))),r.a.createElement(U,null,"#",t.number),r.a.createElement(U,null,"by ",t.author.login),r.a.createElement(U,null,"created on ".concat(Y()(t.createdAt).format("LLL"))),t.closedAt&&r.a.createElement(U,null,"closed on ".concat(Y()(t.closedAt).format("LLL"))),r.a.createElement(U,null,r.a.createElement($,{noPadding:!0,onClick:function(){t.url&&window.open(t.url)},className:"fab fa-github"})),!n&&r.a.createElement($,{onClick:function(){return o(t.id)},className:"fas fa-chevron-down"}),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement($,{onClick:function(){return o("")},className:"fas fa-chevron-up"}),r.a.createElement(L,null,r.a.createElement("h4",null,"Comments"),t.comments.totalCount>0&&r.a.createElement(O,{onChange:function(e){!function(e){var n=t.comments.edges.filter((function(t){return t.node.body.toUpperCase().includes(e.toUpperCase())||t.node.author.login.toUpperCase().includes(e.toUpperCase())||Y()(t.node.createdAt).format("LLL").toUpperCase().includes(e.toUpperCase())}));s(n)}(e.target.value)},type:"text",placeholder:"search..."})),0===t.comments.totalCount?r.a.createElement("em",null,"no comments"):r.a.createElement(r.a.Fragment,null,u.map((function(e){return r.a.createElement(Z,{key:e.node.id,comment:e})})),t.comments.totalCount>4&&r.a.createElement($,{onClick:function(){return o("")},className:"fas fa-chevron-up"}))))},ee=function(e){var t=e.name,n=e.repoName,o=e.type,l=Object(a.useState)(""),c=Object(i.a)(l,2),u=c[0],s=c[1],m="pullRequests"===o?o:"issues",d=function(e,t,n){var a=Object(q.a)(function(){var e="";switch(n){case"pullRequests":e=G;break;case"open-issues":e=H;break;case"closed-issues":e=J}return e}(),{variables:{name:e,repo:t}}),r=a.loading,o=a.error,l=a.data,i=a.refetch,c=l&&l.repository||{};return{repo:Object(D.a)({},c,{loading:r,error:o,refetch:i})}}(t,n,o).repo;return d&&d.loading?r.a.createElement(x,{style:{height:"50vh"}},r.a.createElement(v,{loadingText:!0},"loading...")):d.error?r.a.createElement(x,{style:{height:"50vh"}},r.a.createElement(k,null,d.error.message.includes("401")?"There seems to be some errors. Please ensure you have right access token":"Name or repository not found")):d&&d[m]?d[m].edges.map((function(e){return r.a.createElement(_,{cardPressed:function(e){return s(e)},isPressed:u===e.node.id,key:e.node.id,data:e.node})})):r.a.createElement(x,{style:{height:"50vh"}},r.a.createElement("em",null,"No ",o," found"))},te=function(){var e=Object(a.useState)({name:"",repoName:""}),t=Object(i.a)(e,2),n=t[0],o=t[1];return r.a.createElement(h,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{onSubmitSearch:function(e){o(e)}}),n&&n.name&&n.repoName?r.a.createElement(Q,null,r.a.createElement("div",{label:"Pull requests"},r.a.createElement(ee,{name:n.name,repoName:n.repoName,type:"pullRequests"})),r.a.createElement("div",{label:"Open issues"},r.a.createElement(ee,{name:n.name,repoName:n.repoName,type:"open-issues"})),r.a.createElement("div",{label:"Closed issues"},r.a.createElement(ee,{name:n.name,repoName:n.repoName,type:"closed-issues"}))):r.a.createElement(x,{style:{height:"50vh"}},r.a.createElement(v,{loadingText:!0},"Some example repositories:",r.a.createElement("br",null),r.a.createElement("br",null),["relic-toolkit/relic","ethereum/go-ethereum","ahmadawais/corona-cli","nomiclabs / buidler"].map((function(e,t){return r.a.createElement("li",{key:t},e)}))))),r.a.createElement(v,null,r.a.createElement($,{noPadding:!0,className:"fab fa-github",onClick:function(){window.open("https://github.com/lydialawli/git-repo-viewer")}})," Go to this projects repository"))},ne=function(e){var t=e.onSubmit,n=Object(a.useState)(""),o=Object(i.a)(n,2),l=o[0],c=o[1];return r.a.createElement(f,null,r.a.createElement("form",{onSubmit:function(e){return t(e,l)}},r.a.createElement("h1",null,"Git Repo Viewer"),r.a.createElement(O,{type:"password",name:"token",value:l,onChange:function(e){c(e.target.value)},placeholder:"Paste your GitHub token"}),r.a.createElement(w,{css:{width:"100%",fontFamily:"monospace"}},"SUBMIT")),r.a.createElement(v,{onClick:function(){window.open("https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line#creating-a-token")},style:{textDecoration:"underline"}},"Need some help? click here"),r.a.createElement(y,null,r.a.createElement($,{noPadding:!0,className:"fab fa-github",onClick:function(){window.open("https://github.com/lydialawli/git-repo-viewer")}})," Go to this projects repository"))};ne.defaultProps={errorMsg:""};var ae=ne,re=localStorage.getItem("token"),oe=new s.a({uri:"https://api.github.com/graphql",headers:{Authorization:"Bearer ".concat(re)}}),le=new c.a({link:oe,cache:new m.a});var ie=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)(""),c=Object(i.a)(l,2),s=c[0],m=c[1];return r.a.createElement("div",{className:"layout"},re?r.a.createElement(u.a,{client:le},r.a.createElement(M,{onChangeName:function(e){return o(e)},onChangeRepo:function(e){return m(e)},onLogout:function(){console.log("accesToken => ",re),localStorage.clear(),window.location.reload()}}),r.a.createElement(te,{name:n,repo:s})):r.a.createElement(ae,{onSubmit:function(e,t){e.preventDefault(),localStorage.setItem("token",t),window.location.reload()}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.792c4539.chunk.js.map